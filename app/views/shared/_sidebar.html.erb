<!-- Sidebar -->
<aside class="fixed top-16 left-0 z-40 w-64 h-screen hidden lg:block">
  <div class="h-full px-3 overflow-y-auto">
    <!-- Navigation Links -->
    <nav>
      <%= link_to root_path,
        class: "flex items-center px-3 py-3 text-gray-300 hover:bg-[#162737] rounded-lg text-sm transition-colors group #{'bg-[#0c1925]' if current_page?(root_path)}" do %>
        <%= image_tag 'icons/home.svg', class: 'mr-4' %>
        <%= t('navigation.home') %>
      <% end %>

      <%= link_to games_path,
        class: "flex items-center px-3 py-3 text-gray-300 hover:bg-[#162737] rounded-lg text-sm transition-colors group #{'bg-[#0c1925]' if current_page?(games_path)}" do %>
        <%= image_tag 'icons/explore.svg', class: 'mr-4' %>
        Explore
      <% end %>

      <%= link_to charts_path,
        class: "flex items-center px-3 py-3 text-gray-300 hover:bg-[#162737] rounded-lg text-sm transition-colors group #{'bg-[#0c1925]' if current_page?(charts_path)}" do %>
        <%= image_tag 'icons/chart.svg', class: 'mr-4' %>
        <%= t('navigation.charts') %>
      <% end %>

      <%= link_to downloaded_path,
        class: "flex items-center px-3 py-3 text-gray-300 hover:bg-[#162737] rounded-lg text-sm transition-colors group #{'bg-[#0c1925]' if current_page?(charts_path)}" do %>
        <%= image_tag 'icons/download.svg', class: 'mr-4' %>
        Most Downloaded
      <% end %>

      <%= link_to "events_path",
        class: "flex items-center px-3 py-3 text-gray-300 hover:bg-[#162737] rounded-lg text-sm transition-colors group" do %>
        <%= image_tag 'icons/events.svg', class: 'mr-4' %>
        Challenges
      <% end %>

      <%= link_to "#",
        class: "flex items-center px-3 py-3 text-gray-300 hover:bg-[#162737] rounded-lg text-sm transition-colors group" do %>
        <svg class="h-5 w-5 mr-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users-icon lucide-users"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><path d="M16 3.128a4 4 0 0 1 0 7.744"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><circle cx="9" cy="7" r="4"/></svg>
        Console
      <% end %>

      <%= link_to "#",
        class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg text-sm transition-colors group" do %>
        <%= image_tag 'icons/subscribe.svg', class: 'mr-4' %>
        Subscriptions
      <% end %>

      <% if user_signed_in? %>
        <%= link_to "#",
          class: "flex items-center px-3 py-3 text-gray-300 hover:bg-[#162737] rounded-lg text-sm transition-colors group" do %>
          <%= image_tag 'icons/upload.svg', class: 'mr-4' %>
          Your Games
        <% end %>

        <%= link_to history_games_path,
          class: "flex items-center px-3 py-3 text-gray-300 hover:bg-[#162737] rounded-lg text-sm transition-colors group" do %>
          <%= image_tag 'icons/history.svg', class: 'mr-4' %>
          History
        <% end %>
      <% end %>
    </nav>
  </div>
 </aside>

<!-- Mobile Menu Overlay -->
<div class="lg:hidden fixed inset-0 z-50 hidden" data-mobile-menu-target="menu">
  <div class="fixed inset-0 bg-black bg-opacity-75" data-action="click->mobile-menu#close"></div>
  <div class="fixed top-16 left-0 bottom-0 w-64 bg-[#162737] shadow-xl">
    <div class="h-full px-3 py-4 overflow-y-auto">
      <!-- Mobile Navigation -->
      <nav class="space-y-2">
        <%= link_to t('navigation.home'), root_path,
          class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
        <%= link_to 'Explore', games_path,
          class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
        <%= link_to t('navigation.charts'), charts_path,
          class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
        <%= link_to "Most Downloaded", downloaded_path,
          class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
        <%= link_to "Challenges", "#",
          class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
        <%= link_to "Console", "#",
          class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
        <%= link_to "Subscriptions", "#",
          class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
        <% if user_signed_in? %>
          <%= link_to "Your Games", "#",
            class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
          <%= link_to "History", history_games_path,
            class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
        <% end %>
      </nav>

      <% if user_signed_in? %>
        <div class="mt-6 pt-6 border-t border-[#393a3a]">
          <div class="px-3 mb-4">
            <p class="text-sm text-gray-400"><%= t('navigation.welcome_back') %></p>
            <p class="font-medium text-white"><%= current_user.given_name || current_user.email.split('@').first %></p>
          </div>

          <nav class="space-y-2">
            <%= link_to t('navigation.upload_game'), new_game_path,
              class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
            <% if current_user.staff? %>
              <%= link_to t('navigation.admin'), admin_root_path,
                class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
            <% end %>
            <%= link_to t('navigation.profile'), "#",
              class: "flex items-center px-3 py-2 text-gray-300 hover:bg-[#162737] rounded-lg font-medium transition-colors" %>
          </nav>
        </div>
      <% end %>
    </div>
  </div>
</div>
